{% extends "base.html" %}
{% block content %}

<h3 class="mb-3">Reports</h3>

<div class="card shadow mb-4">
  <div class="card-body">
    <canvas id="salesChart"></canvas>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  new Chart(document.getElementById("salesChart"), {
    type: "line",
    data: {
      labels: {{ labels|tojson }},
      datasets: [{
        label: "Sales ($)",
        data: {{ totals|tojson }},
        borderWidth: 2,
        tension: 0.3
      }]
    }
  });
</script>

<div class="card shadow">
  <div class="card-body">
    <h5>Stock History</h5>

    <table class="table table-sm table-striped">
      <thead>
        <tr><th>Item ID</th><th>Old</th><th>New</th><th>Date</th></tr>
      </thead>
      <tbody>
        {% for h in logs %}
        <tr>
          <td>{{h.item_id}}</td>
          <td>{{h.old_stock}}</td>
          <td>{{h.new_stock}}</td>
          <td>{{h.changed_at}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
